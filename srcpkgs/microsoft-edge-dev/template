# Template file for 'microsoft-edge-dev'
pkgname=microsoft-edge-dev
version=91.0.845.2
revision=1
archs="x86_64"
hostmakedepends="bsdtar tar xz"
depends="xdg-utils"
short_desc="Microsoft Edge browser - development branch"
maintainer="Zach Dykstra <dykstra.zachary@gmail.com>"
license="custom:Proprietary"
homepage="https://www.microsoftedgeinsider.com/en-us/"
distfiles="https://packages.microsoft.com/repos/edge/pool/main/m/microsoft-edge-dev/${pkgname}_${version}-1_amd64.deb"
checksum=e4c69a695b259e7eaa8411910b9e8758ca5b183b82a8048a97936013c84e5ebe
restricted=yes
repository="nonfree"
nopie=yes
nostrip=yes

do_extract() {
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}_${version}-1_amd64.deb data.tar.xz | bsdtar --extract --xz -f - -C .
}

do_install() {
	vinstall usr/share/applications/microsoft-edge-dev.desktop 644 usr/share/applications

	vcopy opt/ opt

	vmkdir usr/bin
	ln -s ../../opt/microsoft/msedge-dev/microsoft-edge-dev ${DESTDIR}/usr/bin/microsoft-edge-dev
}
