# Template file for 'microsoft-edge-dev'
pkgname=microsoft-edge-dev
version=92.0.902.2
revision=1
archs="x86_64"
hostmakedepends="bsdtar tar xz"
depends="xdg-utils"
short_desc="Microsoft Edge browser - development branch"
maintainer="Zach Dykstra <dykstra.zachary@gmail.com>"
license="custom:Proprietary"
homepage="https://www.microsoftedgeinsider.com/en-us/"
distfiles="https://packages.microsoft.com/repos/edge/pool/main/m/microsoft-edge-dev/${pkgname}_${version}-1_amd64.deb"
checksum=cf0a5a4bf1120115a4b4a8a64b4fc511ea5d194cdfb3420da3d825ba07ca6416
restricted=yes
repository="nonfree"
nopie=yes
nostrip=yes

do_extract() {
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}_${version}-1_amd64.deb data.tar.xz | bsdtar --extract --xz -f - -C .
}

do_install() {
	vinstall usr/share/applications/microsoft-edge-dev.desktop 644 usr/share/applications

	vcopy opt/ opt

	vmkdir usr/bin
	ln -s ../../opt/microsoft/msedge-dev/microsoft-edge-dev ${DESTDIR}/usr/bin/microsoft-edge-dev

	vdoc usr/share/doc/microsoft-edge-dev/changelog.gz
	vlicense usr/share/doc/microsoft-edge-dev/changelog.gz
	vman usr/share/man/man1/microsoft-edge-dev.1.gz
}
